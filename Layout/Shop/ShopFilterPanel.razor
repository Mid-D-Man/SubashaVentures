@using SubashaVentures.Components.Shared.Buttons
@using SubashaVentures.Components.Shared.Forms

<div class="filter-panel">
    @if (IsLoading)
    {
        <div class="filter-loading">
            <p>Loading filters...</p>
        </div>
    }
    else
    {
        @* Categories *@
        <div class="filter-section">
            <h3 class="section-title">Categories</h3>
            <div class="filter-options">
                @foreach (var category in Categories)
                {
                    <label class="filter-option">
                        <input 
                            type="checkbox" 
                            checked="@SelectedCategories.Contains(category)"
                            @onchange="@(() => ToggleCategory(category))" />
                        <span class="option-label">@category</span>
                    </label>
                }
            </div>
        </div>

        @* Brands *@
        <div class="filter-section">
            <h3 class="section-title">Brands</h3>
            <div class="filter-options">
                @foreach (var brand in Brands)
                {
                    <label class="filter-option">
                        <input 
                            type="checkbox" 
                            checked="@SelectedBrands.Contains(brand)"
                            @onchange="@(() => ToggleBrand(brand))" />
                        <span class="option-label">@brand</span>
                    </label>
                }
            </div>
        </div>

        @* Rating *@
        <div class="filter-section">
            <h3 class="section-title">Minimum Rating</h3>
            <div class="rating-options">
                @for (int rating = 4; rating >= 1; rating--)
                {
                    int currentRating = rating;
                    <button 
                        class="rating-btn @(MinRating == currentRating ? "active" : "")"
                        @onclick="@(() => MinRating = currentRating)">
                        @for (int i = 0; i < 5; i++)
                        {
                            <span class="star @(i < currentRating ? "filled" : "")">â˜…</span>
                        }
                        <span class="rating-text">& Up</span>
                    </button>
                }
            </div>
        </div>

        @* Price Range *@
        <div class="filter-section">
            <h3 class="section-title">Price Range</h3>
            <div class="price-inputs-wrapper">
                <InputField 
                    Type="number"
                    Placeholder="Min"
                    Value="@MinPriceText"
                    ValueChanged="@(value => MinPriceText = value)"
                    Size="InputField.InputSize.Small"
                    CssClass="price-input-field" />
                
                <span class="price-separator">-</span>
                
                <InputField 
                    Type="number"
                    Placeholder="Max"
                    Value="@MaxPriceText"
                    ValueChanged="@(value => MaxPriceText = value)"
                    Size="InputField.InputSize.Small"
                    CssClass="price-input-field" />
            </div>
        </div>

        @* Other Filters *@
        <div class="filter-section">
            <h3 class="section-title">Other</h3>
            <div class="filter-options">
                <label class="filter-option">
                    <input type="checkbox" @bind="OnSale" />
                    <span class="option-label">On Sale</span>
                </label>
                <label class="filter-option">
                    <input type="checkbox" @bind="FreeShipping" />
                    <span class="option-label">Free Shipping</span>
                </label>
            </div>
        </div>

        @* Action Buttons *@
        <div class="filter-actions">
            <PrimaryButton 
                Size="PrimaryButton.ButtonSize.Large"
                OnClick="ApplyFilters"
                CssClass="apply-btn">
                Apply Filters
            </PrimaryButton>
            
            <SecondaryButton 
                Size="SecondaryButton.ButtonSize.Large"
                Variant="SecondaryButton.ButtonVariant.Outline"
                OnClick="ResetFilters"
                CssClass="reset-btn">
                Reset All
            </SecondaryButton>
        </div>
    }
</div>
