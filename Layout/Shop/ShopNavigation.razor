@inject NavigationManager NavigationManager

<nav class="shop-navigation">
    <div class="nav-container">
        @* Logo *@
        <a href="/" class="nav-logo">
            <span class="logo-text">SubashaVentures</span>
        </a>

        @* Search Bar *@
        <div class="nav-search">
            <span class="search-icon">ğŸ”</span>
            <input 
                type="search" 
                placeholder="Search products..." 
                class="search-input"
                @bind-value="searchQuery"
                @bind-value:event="oninput"
                @onchange="HandleSearchChange" />
        </div>

        @* Actions *@
        <div class="nav-actions">
            <button class="nav-btn" @onclick="NavigateToCart" title="Cart">
                <span class="nav-icon">ğŸ›’</span>
                @if (CartItemCount > 0)
                {
                    <span class="cart-badge">@CartItemCount</span>
                }
            </button>
            
            <button class="nav-btn" @onclick="NavigateToAccount" title="Account">
                <span class="nav-icon">ğŸ‘¤</span>
            </button>
        </div>
    </div>
</nav>

@code {
    [Parameter] public int CartItemCount { get; set; }
    [Parameter] public EventCallback<string> OnSearchChange { get; set; }

    private string searchQuery = "";

    private async Task HandleSearchChange()
    {
        if (OnSearchChange.HasDelegate)
        {
            await OnSearchChange.InvokeAsync(searchQuery);
        }
    }

    private void NavigateToCart()
    {
        NavigationManager.NavigateTo("/cart");
    }

    private void NavigateToAccount()
    {
        NavigationManager.NavigateTo("/account");
    }
}
