@using SubashaVentures.Components.Shared.Forms

<nav class="shop-navigation">
    <div class="nav-content">
        <div class="nav-left">
            <a href="/" class="brand-logo">
                <span class="logo-icon">ğŸ‘Ÿ</span>
                <span class="logo-text">Subasha</span>
            </a>
        </div>

        <div class="nav-center">
            <div class="search-wrapper">
                <span class="search-icon">ğŸ”</span>
                <InputField 
                    Type="text"
                    Placeholder="Search products..."
                    @bind-Value="SearchQuery"
                    @bind-Value:after="OnSearchChanged"
                    Size="InputField.InputSize.Large"
                    CssClass="search-input-field" />
            </div>
        </div>

        <div class="nav-right">
            <a href="/cart" class="nav-btn cart-btn">
                <span class="cart-icon">ğŸ›’</span>
                @if (CartItemCount > 0)
                {
                    <span class="cart-badge">@CartItemCount</span>
                }
            </a>

            <a href="/account" class="nav-btn account-btn">
                <span class="account-icon">ğŸ‘¤</span>
            </a>
        </div>
    </div>
</nav>

@code {
    [CascadingParameter] public Pages.Shop.Shop? ShopPage { get; set; }
    [Parameter] public int CartItemCount { get; set; }
    
    private string SearchQuery { get; set; } = "";

    private void OnSearchChanged()
    {
        ShopPage?.HandleSearchChange(SearchQuery);
    }
}
