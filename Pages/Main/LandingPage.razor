@page "/"
@using SubashaVentures.Components.Shared.Buttons
@using SubashaVentures.Components.Shared.Cards
@using SubashaVentures.Components.Shared.Loading
@using SubashaVentures.Layout.Main
@using SubashaVentures.Domain.Product
@using SubashaVentures.Services.VisualElements
@using SubashaVentures.Domain.Enums
@layout LandingPageLayout
@inject IVisualElementsService VisualElements

<div class="landing-page">
    <!-- Hero Section -->
    <section class="hero-section">
        <div class="hero-content">
            <div class="hero-text">
                <h1 class="hero-title">
                    <span class="title-static">Style That Speaks</span>
                    <div class="title-animated">
                        <div class="flip-container">
                            <div class="flip-text">
                                <div><div>Your Language</div></div>
                                <div><div>Your Story</div></div>
                                <div><div>Your Vibes</div></div>
                            </div>
                        </div>
                    </div>
                </h1>
                <p class="hero-description">
                    Discover premium clothing and home goods that reflect your unique personality. 
                    From trendy fashion to cozy home essentials - find everything you love at Subasha.
                </p>
                <div class="hero-actions">
                    <button class="professional-btn primary" @onclick="NavigateToShop">
                        @if (!string.IsNullOrEmpty(shopNowIcon))
                        {
                            <span class="btn-icon">@((MarkupString)shopNowIcon)</span>
                        }
                        <span class="btn-label">Shop Now</span>
                    </button>
                    <button class="professional-btn secondary">
                        @if (!string.IsNullOrEmpty(storyIcon))
                        {
                            <span class="btn-icon">@((MarkupString)storyIcon)</span>
                        }
                        <span class="btn-label">Our Story</span>
                    </button>
                </div>
                <div class="hero-stats">
                    <div class="stat-item">
                        <span class="stat-number">10K+</span>
                        <span class="stat-label">Happy Customers</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">5000+</span>
                        <span class="stat-label">Products</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">50+</span>
                        <span class="stat-label">Brands</span>
                    </div>
                </div>
            </div>
            <div class="hero-visual">
                <div class="hero-image-container">
                    @if (isLoadingPOTD)
                    {
                        <LoadingSpinner Size="LoadingSpinner.SpinnerSize.Large" 
                                      Variant="LoadingSpinner.SpinnerVariant.Circle"
                                      Message="Loading Product of the Day..." />
                    }
                    else if (productOfTheDay != null)
                    {
                        <ProductOfTheDayCard 
                            Product="@productOfTheDay"
                            OnClick="@HandlePOTDClick"
                            OnAddToCart="@HandleAddToCart"
                            OnViewDetails="@HandleViewPOTDDetails"
                            CssClass="hero-potd-card" />
                    }
                    else
                    {
                        <div class="hero-image-placeholder">
                            ðŸ‘— Fashion Hub
                        </div>
                    }
                </div>
            </div>
        </div>
    </section>

    <!-- Featured Products Section -->
    <section class="featured-section">
        <div class="section-header">
            <h2 class="section-title">Featured Products</h2>
            <p class="section-subtitle">Our most popular items this season</p>
        </div>

        @if (isLoadingFeatured)
        {
            <div class="scroll-wrapper">
                <div class="scroll-content">
                    @for (int i = 0; i < 6; i++)
                    {
                        <div class="product-card-wrapper">
                            <SkeletonCard />
                        </div>
                    }
                </div>
            </div>
        }
        else if (featuredProducts.Any())
        {
            <div class="scroll-wrapper">
                <div class="scroll-content">
                    @foreach (var product in featuredProducts)
                    {
                        <div class="product-card-wrapper">
                            <FeaturedProductCard 
                                Product="@product"
                                OnClick="@(() => HandleProductClick(product))"
                                OnViewDetails="@(() => HandleViewDetails(product))" />
                        </div>
                    }
                    @* DUPLICATE for seamless loop *@
                    @foreach (var product in featuredProducts)
                    {
                        <div class="product-card-wrapper">
                            <FeaturedProductCard 
                                Product="@product"
                                OnClick="@(() => HandleProductClick(product))"
                                OnViewDetails="@(() => HandleViewDetails(product))" />
                        </div>
                    }
                </div>
            </div>

            <div class="section-cta">
                <button class="professional-btn primary large" @onclick="NavigateToShop">
                    @if (!string.IsNullOrEmpty(allProductsIcon))
                    {
                        <span class="btn-icon">@((MarkupString)allProductsIcon)</span>
                    }
                    <span class="btn-label">View All Products</span>
                </button>
            </div>
        }
        else
        {
            <div class="empty-state">
                <div class="empty-icon">ðŸ“¦</div>
                <h3 class="empty-title">No Products Available</h3>
                <p class="empty-text">Check back soon for amazing deals!</p>
            </div>
        }
    </section>

    <!-- Newsletter Section -->
    <section class="newsletter-section">
        <div class="newsletter-content">
            <div class="newsletter-text">
                <h2 class="newsletter-title">Your Style Story Starts Here</h2>
                <p class="newsletter-description">
                    Be the first to shop new arrivals and get insider style tips.
                    Discover fresh looks that speak your language and the stories behind our most unique pieces.
                </p>
            </div>
            <div class="newsletter-form">
                <div class="form-group">
                    <input type="email" 
                           placeholder="Enter your email address" 
                           class="newsletter-input"
                           @bind="newsletterEmail"
                           @onkeydown="HandleNewsletterKeyPress" />
                    <PrimaryButton 
                        CssClass="newsletter-submit"
                        OnClick="HandleNewsletterSubmit"
                        IsDisabled="@string.IsNullOrWhiteSpace(newsletterEmail)">
                        Unlock Your Story
                    </PrimaryButton>
                </div>
                <p class="newsletter-privacy">
                    We respect your inbox. Unsubscribe anytime.
                </p>
            </div>
        </div>
    </section>

    <!-- Testimonials Section -->
    <section class="testimonials-section">
        <div class="section-header">
            <h2 class="section-title">What Our Customers Say</h2>
            <p class="section-subtitle">Real reviews from real customers</p>
        </div>

        <div class="testimonials-scroll-wrapper">
            <div class="testimonials-scroll-content">
                @foreach (var review in sampleReviews)
                {
                    <CustomerReviewCard 
                        Review="@review"
                        IsHelpful="@false"
                        OnHelpfulClick="@HandleHelpfulClick"
                        OnImageClick="@HandleReviewImageClick" />
                }
                @* DUPLICATE for seamless loop *@
                @foreach (var review in sampleReviews)
                {
                    <CustomerReviewCard 
                        Review="@review"
                        IsHelpful="@false"
                        OnHelpfulClick="@HandleHelpfulClick"
                        OnImageClick="@HandleReviewImageClick" />
                }
            </div>
        </div>
    </section>
</div>

@code {
    // Button icons cache
    private string shopNowIcon = "";
    private string storyIcon = "";
    private string allProductsIcon = "";
}
