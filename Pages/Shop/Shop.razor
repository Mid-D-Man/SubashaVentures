@page "/shop"
@page "/shop/{category}"
@using SubashaVentures.Layout.Shop
@using SubashaVentures.Components.Shared.Cards
@layout ShopLayout

<div class="shop-page">
    <div class="shop-header-section">
        <h1>@PageTitle</h1>
        <p class="subtitle">@TotalProducts products found</p>
    </div>

    @if (activeFilters.Any())
    {
        <div class="active-filters">
            @foreach (var filter in activeFilters)
            {
                <span class="filter-tag">
                    @filter
                    <button @onclick="@(() => RemoveFilter(filter))">Ã—</button>
                </span>
            }
            <button class="clear-all" @onclick="ClearAllFilters">Clear All</button>
        </div>
    }

    @if (isLoading)
    {
        <div class="loading-grid">
            @for (int i = 0; i < 12; i++)
            {
                <div class="skeleton-card"></div>
            }
        </div>
    }
    else if (!products.Any())
    {
        <div class="empty-state">
            <h3>No products found</h3>
            <p>Try adjusting your filters</p>
        </div>
    }
    else
    {
        <div class="products-grid">
            @foreach (var product in paginatedProducts)
            {
                <ShopProductCard 
                    Product="@product"
                    OnClick="@(() => NavigateToProduct(product.Slug))" />
            }
        </div>

        @if (totalPages > 1)
        {
            <div class="pagination">
                <button class="page-btn" 
                        disabled="@(currentPage == 1)"
                        @onclick="PreviousPage">
                    Previous
                </button>
                
                <span class="page-info">Page @currentPage of @totalPages</span>
                
                <button class="page-btn" 
                        disabled="@(currentPage == totalPages)"
                        @onclick="NextPage">
                    Next
                </button>
            </div>
        }
    }
</div>
