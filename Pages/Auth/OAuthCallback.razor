@* Pages/Auth/OAuthCallback.razor - COMPLETE *@
@page "/auth/callback"
@using Microsoft.AspNetCore.Components.Authorization
@using SubashaVentures.Services.Auth
@using SubashaVentures.Services.Supabase
@using SubashaVentures.Services.Users
@using SubashaVentures.Services.Storage
@using SubashaVentures.Utilities.HelperScripts
@using LogLevel = SubashaVentures.Utilities.Logging.LogLevel
@inject SupabaseAuthService AuthService
@inject NavigationManager NavigationManager
@inject IBlazorAppLocalStorageService LocalStorage
@inject AuthenticationStateProvider AuthStateProvider
@inject IUserService UserService

<div class="oauth-callback-page">
    <div class="callback-container">
        <!-- Logo/Brand -->
        <div class="brand-section">
            <div class="brand-icon">SV</div>
            <h1 class="brand-name">Subasha</h1>
        </div>

        <!-- Loading Animation -->
        <div class="loading-section">
            <div class="spinner-wrapper">
                <div class="spinner @(hasError ? "error" : "")"></div>
            </div>
            <h2 class="status-title @(hasError ? "error-text" : "")">@statusMessage</h2>
            <p class="status-detail @(hasError ? "error-text" : "")">@detailMessage</p>
        </div>

        <!-- Progress Dots (optional visual feedback) -->
        @if (!hasError)
        {
            <div class="progress-dots">
                <span class="dot active"></span>
                <span class="dot @(isProcessing ? "active" : "")"></span>
                <span class="dot @(isComplete ? "active" : "")"></span>
            </div>
        }
        
        <!-- Error Actions -->
        @if (hasError)
        {
            <div class="error-actions">
                <button class="retry-button" @onclick="RetrySignIn">
                    Try Again
                </button>
            </div>
        }
    </div>
</div>

@code {
    // Code-behind in OAuthCallback.razor.cs
}
