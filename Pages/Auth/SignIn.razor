@page "/signin"
@using SubashaVentures.Layout.Auth
@using SubashaVentures.Components.Shared.Forms
@using SubashaVentures.Components.Shared.Buttons
@layout AuthLayout

<div class="signin-page">
    <div class="form-header">
        <h2 class="form-title">Welcome Back</h2>
        <p class="form-subtitle">Sign in to your account to continue</p>
    </div>

    <form class="signin-form" @onsubmit="HandleSignIn">
        <!-- Success Message (from registration) -->
        @if (!string.IsNullOrEmpty(successMessage))
        {
            <div class="success-banner">
                <span class="success-icon">âœ“</span>
                <span class="success-text">@successMessage</span>
            </div>
        }

        <!-- General Error Message -->
        @if (!string.IsNullOrEmpty(generalError))
        {
            <div class="error-banner">
                <span class="error-icon">!</span>
                <span class="error-text">@generalError</span>
            </div>
        }

        <!-- Return URL Notice -->
        @if (!string.IsNullOrEmpty(ReturnUrl))
        {
            <div class="info-banner">
                <span class="info-icon">â„¹</span>
                <span class="info-text">Please sign in to continue</span>
            </div>
        }

        <!-- Google Sign In -->
        <button type="button" 
                class="social-btn google" 
                @onclick="HandleGoogleSignIn"
                disabled="@isLoading">
            <span class="social-icon">G</span>
            <span class="social-text">Continue with Google</span>
        </button>

        <!-- Divider -->
        <div class="divider">
            <span class="divider-line"></span>
            <span class="divider-text">OR</span>
            <span class="divider-line"></span>
        </div>

        <!-- Email Field -->
        <InputField 
            Label="Email Address"
            Type="email"
            @bind-Value="email"
            Placeholder="Enter your email"
            PrefixIcon="âœ‰"
            IsRequired="true"
            HasError="@(!string.IsNullOrEmpty(emailError))"
            ErrorMessage="@emailError"
            ShowClearButton="true"
            Size="InputField.InputSize.Medium" />

        <!-- Password Field -->
        <InputField 
            Label="Password"
            Type="@(showPassword ? "text" : "password")"
            @bind-Value="password"
            Placeholder="Enter your password"
            PrefixIcon="ðŸ”’"
            IsRequired="true"
            HasError="@(!string.IsNullOrEmpty(passwordError))"
            ErrorMessage="@passwordError"
            Size="InputField.InputSize.Medium" />

        <!-- Remember Me & Forgot Password -->
        <div class="form-options">
            <label class="remember-label">
                <input type="checkbox" @bind="rememberMe" class="checkbox-input" />
                <span class="checkbox-text">Remember me</span>
            </label>
            
            <a href="forgot-password" class="forgot-link">Forgot Password?</a>
        </div>

        <!-- Sign In Button -->
        <PrimaryButton 
            Type="submit" 
            Size="PrimaryButton.ButtonSize.Large"
            IsDisabled="@isLoading"
            IsLoading="@isLoading"
            CssClass="signin-button">
            Sign In
        </PrimaryButton>

        <!-- Sign Up Link -->
        <div class="form-footer">
            <p class="footer-question">Don't have an account?</p>
            <a href="signup" class="footer-link">Sign Up</a>
        </div>
    </form>
</div>

@code {
    // Code is in SignIn.razor.cs
}
