@page "/signup"
@using SubashaVentures.Layout.Auth
@using SubashaVentures.Components.Shared.Forms
@using SubashaVentures.Components.Shared.Buttons
@layout AuthLayout

<div class="signup-page">
    <div class="form-header">
        <h2 class="form-title">Create Account</h2>
        <p class="form-subtitle">Join us and start your shopping journey</p>
    </div>

    <form class="signup-form" @onsubmit="HandleSignUp">
        <!-- General Error Message -->
        @if (!string.IsNullOrEmpty(generalError))
        {
            <div class="error-banner">
                <span class="error-icon">!</span>
                <span class="error-text">@generalError</span>
            </div>
        }

        <!-- Success Message -->
        @if (!string.IsNullOrEmpty(successMessage))
        {
            <div class="success-banner">
                <span class="success-icon">âœ“</span>
                <span class="success-text">@successMessage</span>
            </div>
        }

        <!-- Google Sign Up -->
        <button type="button" 
                class="social-btn google" 
                @onclick="HandleGoogleSignUp"
                disabled="@isLoading">
            <span class="social-icon">G</span>
            <span class="social-text">Continue with Google</span>
        </button>

        <!-- Divider -->
        <div class="divider">
            <span class="divider-line"></span>
            <span class="divider-text">OR</span>
            <span class="divider-line"></span>
        </div>

        <!-- Name Fields Row -->
        <div class="form-row">
            <InputField 
                Label="First Name"
                Type="text"
                @bind-Value="firstName"
                Placeholder="John"
                IsRequired="true"
                HasError="@(!string.IsNullOrEmpty(firstNameError))"
                ErrorMessage="@firstNameError"
                Size="InputField.InputSize.Medium" />
            
            <InputField 
                Label="Last Name"
                Type="text"
                @bind-Value="lastName"
                Placeholder="Doe"
                IsRequired="true"
                HasError="@(!string.IsNullOrEmpty(lastNameError))"
                ErrorMessage="@lastNameError"
                Size="InputField.InputSize.Medium" />
        </div>

        <!-- Email Field -->
        <InputField 
            Label="Email Address"
            Type="email"
            @bind-Value="email"
            Placeholder="john.doe@example.com"
            PrefixIcon="âœ‰"
            IsRequired="true"
            HasError="@(!string.IsNullOrEmpty(emailError))"
            ErrorMessage="@emailError"
            ShowClearButton="true"
            Size="InputField.InputSize.Medium" />

        <!-- Password Field -->
        <InputField 
            Label="Password"
            Type="@(showPassword ? "text" : "password")"
            @bind-Value="password"
            Placeholder="Enter your password"
            PrefixIcon="ðŸ”’"
            IsRequired="true"
            HasError="@(!string.IsNullOrEmpty(passwordError))"
            ErrorMessage="@passwordError"
            HelperText="Must be at least 8 characters with uppercase, lowercase, and number"
            Size="InputField.InputSize.Medium" />

        <!-- Confirm Password Field -->
        <InputField 
            Label="Confirm Password"
            Type="@(showConfirmPassword ? "text" : "password")"
            @bind-Value="confirmPassword"
            Placeholder="Confirm your password"
            PrefixIcon="ðŸ”’"
            IsRequired="true"
            HasError="@(!string.IsNullOrEmpty(confirmPasswordError))"
            ErrorMessage="@confirmPasswordError"
            Size="InputField.InputSize.Medium" />

        <!-- Terms & Conditions -->
        <div class="terms-checkbox">
            <label class="checkbox-label">
                <input type="checkbox" @bind="acceptTerms" class="checkbox-input" />
                <span class="checkbox-text">
                    I agree to the 
                    <a href="/terms" class="terms-link" target="_blank">Terms and Conditions</a> 
                    and 
                    <a href="/privacy" class="terms-link" target="_blank">Privacy Policy</a>
                </span>
            </label>
            @if (!string.IsNullOrEmpty(termsError))
            {
                <span class="terms-error">@termsError</span>
            }
        </div>

        <!-- Sign Up Button -->
        <PrimaryButton 
            Type="submit" 
            Size="PrimaryButton.ButtonSize.Large"
            IsDisabled="@isLoading"
            IsLoading="@isLoading"
            CssClass="signup-button">
            Sign Up
        </PrimaryButton>

        <!-- Sign In Link -->
        <div class="form-footer">
            <p class="footer-question">Already have an account?</p>
            <a href="/signin" class="footer-link">Sign In</a>
        </div>
    </form>
</div>

@code {
    // Code is in SignUp.razor.cs
}
